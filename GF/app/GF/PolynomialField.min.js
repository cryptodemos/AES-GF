var Configuration=function(){return function(b,a,c){void 0===b&&(b=2);void 0===a&&(a=10);void 0===c&&(c=!0);this.field=b;this.displayOption=a;this.showDetailedSteps=c;this.enablePolynomialCompute=this.enableDivision=!0}}(),PolynomialField=function(){function b(a,c,f,e,d){var h=this;void 0===c&&(c=new Configuration);void 0===d&&(d=!0);this.chipArray=[];this._numberArray=[];this.decimal="number"===typeof a?a:Utility.StringArrayToDecimalNumber(a.map(function(a){return a.toString()}),c.field);this.chipArray=
Utility.decimalNumberToPolynomial(this.decimal,c.field).reverse().map(function(a,c,b){return{value:a.toString(),index:b.length-c-1}});this.config=c;this.hideZero=d;f&&e&&(f.$watchCollection(e+".chipArray",function(){return h.syncChipToValue()}),b.allPolynomial.push(this))}Object.defineProperty(b.prototype,"numberValue",{get:function(){return isNaN(this.decimal)||0==this.decimal&&this.hideZero?"":this.decimal.toString(this.config.displayOption)},set:function(a){this.decimal!=parseInt(a,this.config.displayOption)&&
(this.decimal=parseInt(a,this.config.displayOption),this.chipArray=Utility.decimalNumberToPolynomial(this.decimal,this.config.field).reverse().map(function(a,b,e){return{value:a.toString(),index:e.length-b-1}}))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"numberArray",{get:function(){return Utility.NumberArrayToDecimalNumber(this._numberArray,this.config.field)==this.decimal?this._numberArray:this._numberArray=Utility.decimalNumberToPolynomial(this.decimal,this.config.field)},
set:function(a){this.decimal=Utility.NumberArrayToDecimalNumber(a,this.config.field);this._numberArray=Utility.decimalNumberToPolynomial(this.decimal,this.config.field)},enumerable:!0,configurable:!0});b.prototype.decimalInverseModulus=function(a){for(var c=1;c<this.config.field;c++)if(1==a*c%this.config.field)return c};b.prototype.remove=function(){b.allPolynomial.splice(b.allPolynomial.indexOf(this),1)};b.updateAllMath=function(){!b.mathUpdateInProgress&&1>=MathJax.Hub.queue.pending&&(b.mathUpdateInProgress=
!0,setTimeout(function(){return[b.mathUpdateInProgress=!1,MathJax.Hub.Queue(["Update",MathJax.Hub,window.document.body])]},50))};b.prototype.syncValueToChip=function(){this.chipArray=Utility.decimalNumberToPolynomial(this.decimal,this.config.field).reverse().map(function(a,c,b){return{value:a.toString(),index:b.length-c-1}})};b.prototype.syncChipToValue=function(){this.decimal=Utility.StringArrayToDecimalNumber(this.chipArray.map(function(a,c,b){return b[b.length-c-1].value}),this.config.field);this.chipArray.forEach(function(a,
b,f){a.index=f.length-1-b});b.updateAllMath()};b.add=function(a,c){for(var f=Utility.decimalNumberToPolynomial(a.decimal,a.config.field),e=Utility.decimalNumberToPolynomial(c.decimal,a.config.field),d=Math.max(f.length,e.length),h=[],g=0;g<d;g++)h[g]=((f[g]?f[g]:0)+(e[g]?e[g]:0))%a.config.field;return new b(h,a.config)};b.addWithSteps=function(a,c){var f=b.add(a,c),e=Utility.paddingPolynomials([a,c,f]);return{value:f.decimal,tex:"\\begin{array}{add}\n            & "+e[0]+"\\\\\n            + & \\underline{"+
e[1]+"}\\\\\n            &"+e[2]+"\n            \\end{array}"}};b.subtract=function(a,c){for(var f=Utility.decimalNumberToPolynomial(a.decimal,a.config.field),e=Utility.decimalNumberToPolynomial(c.decimal,a.config.field),d=Math.max(f.length,e.length),h=[],g=0;g<d;g++)h[g]=((f[g]?f[g]:0)+a.config.field-(e[g]?e[g]:0))%a.config.field;return new b(h,a.config)};b.subtractWithSteps=function(a,c){var f=b.subtract(a,c),e=Utility.paddingPolynomials([a,c,f]);return{value:f.decimal,tex:"\\begin{array}{sub}\n            & "+
e[0]+"\\\\\n            - & \\underline{"+e[1]+"}\\\\\n            &"+e[2]+"\n            \\end{array}"}};b._multiply=function(a,c){for(var f=[],e=[],d=0;d<a.numberArray.length+c.numberArray.length;d++)e[d]=0;f.push(a);f.push(c);c.numberArray.forEach(function(c,d){if(0!=c){for(var g=[],h=0;h<d;h++)g[h]=0;a.numberArray.forEach(function(b,f){g[f+d]=b*c%a.config.field;e[f+d]=void 0==e[f+d]?b*c:(b*c+e[f+d])%a.config.field});f.push(new b(g,a.config))}});f.push(new b(e,a.config));return f};b.multiplyWithSteps=
function(a,c){for(var f=b._multiply(a,c),e=Utility.paddingPolynomials(f),d="\\begin{array}{mul}\n           & "+e[0]+"\\\\\n            * &\\underline{"+e[1]+"}\\\\\n            ",h=2;h<e.length-2;h++)d+="&"+e[h]+" \\\\";d+="\n            &\\underline{"+e[e.length-2]+"}\\\\\n            &"+e[e.length-1]+"\n            \\end{array}\n        ";return{value:f[f.length-1].decimal,tex:d}};b.divideAndModulus=function(a,c,f){var e=[],d=Utility.decimalNumberToPolynomial(c.decimal,c.config.field),h=Utility.decimalNumberToPolynomial(f.decimal,
f.config.field),g=[],k=new b(c.decimal,c.config);e.push(f,c);for(d=d.length-h.length;0<=d;d--)if(g[d]=c.decimalInverseModulus(h[h.length-1])*Utility.decimalNumberToPolynomial(k.decimal,c.config.field)[h.length+d-1]%c.config.field,g[d]=isNaN(g[d])?0:g[d],0!=g[d]){var m=b._multiply(f,new b(Math.pow(c.config.field,d)*g[d],c.config)).pop();e.push(m);k=b.subtract(k,m);e.push(k)}e.unshift(new b(g,c.config));c=Utility.paddingPolynomials(e);d=Utility.polynomialInTexNoPadding(e[1]);f="\\begin{array}{div}\n            & "+
c[0]+"\\\\\n            "+d+" & \\hspace{-0.5em} \\enclose{longdiv} {"+c[2]+"}\\\\";for(d=3;d<c.length;d+=2)f+="\n            & \\underline{"+c[d]+"}\\\\\n            & {"+c[d+1]+"}\\\\";return{value:e[a?0:e.length-1].decimal,tex:f+"\\end{array}"}};b.AESCompute=function(a,c){return b.mod(new b(b.multiplyWithSteps(new b(parseInt(a,16)),new b(parseInt(c,16))).value),new b(283)).value.toString(16)};b.AESAdd=function(a,c){return b.mod(b.add(new b(parseInt(a,16)),new b(parseInt(c,16))),new b(283)).value.toString(16)};
b.modulusInverse=function(a,c,f){if(0==c.decimal)return f.push({tex:"By\\ definition:\\ Zero,\\ which\\ has\\ no\\ inverse,\\ is\\ mapped\\ to\\ zero.",url:"1=1"}),[0,0,a.decimal];if(1==c.decimal)return[0,1,a.decimal];var e=b.div(a,c).value,d=b.mod(a,c).value;f.push({tex:a.numberValue+" \u00f7 "+c.numberValue+" =\n                 "+e.toString(a.config.displayOption)+" ... "+d.toString(a.config.displayOption)+"\n                 \\ \\Rightarrow  \\\n                "+d.toString(a.config.displayOption)+
" = "+a.numberValue+" - \n                "+e.toString(a.config.displayOption)+" \u00d7 "+c.numberValue+" ",url:"1="+a.decimal+"&2="+c.decimal+"&op=3"});var d=b.modulusInverse(c,new b(d,a.config),f),h=b.multiplyWithSteps(new b(d[1],a.config),new b(e,a.config)).value,g=d[1],k=b.subtract(new b(d[0],a.config),new b(h,a.config)).decimal,m=d[2],l="";if(0!=d[0]){var n="1 = "+d[0].toString(a.config.displayOption)+" \u00d7 \\color{black}{"+c.numberValue+"} \n                - "+d[1].toString(a.config.displayOption)+
" \u00d7 \n                \\color{blue}{("+a.numberValue+" - \n                "+e.toString(a.config.displayOption)+" \u00d7 "+c.numberValue+")}\n                \\\\ \\Rightarrow  \\\n                \n                1 = "+d[1].toString(a.config.displayOption)+" \u00d7 \\color{black}{"+a.numberValue+"}\n                + ("+d[0].toString(a.config.displayOption)+" +\n                \\color{red}{"+d[1].toString(a.config.displayOption)+" \u00d7 \n                "+e.toString(a.config.displayOption)+
"})\n                \u00d7 \\color{black}{"+c.numberValue+"}\n                \\\\ \\Rightarrow  \\ ",l="1 = "+d[1].toString(a.config.displayOption)+" \u00d7 \\color{black}{"+a.numberValue+"} \n                + ("+d[0].toString(a.config.displayOption)+" +\n                \\color{red}{"+h.toString(a.config.displayOption)+"})\u00d7 \\color{black}{"+c.numberValue+"}";f.push({tex:n+l,url:"1="+d[1]+"&2="+e+"&op=2"});l="1 = "+d[1].toString(a.config.displayOption)+" \u00d7 \\color{black}{"+a.numberValue+
"} \n                + (\\color{red}{"+d[0].toString(a.config.displayOption)+" +\n                "+h.toString(a.config.displayOption)+"})\u00d7 \\color{black}{"+c.numberValue+"}\n                 \\\\ \\Rightarrow  \\ ";f.push({tex:l+("\n                1 = "+g.toString(a.config.displayOption)+" \u00d7 \\color{black}{"+a.numberValue+"}  \n                - \\color{red}{"+k.toString(a.config.displayOption)+"} \u00d7 \\color{blue}{"+c.numberValue+"}"),url:"1="+d[0]+"&2="+h+"&op=2"})}else f.push({tex:l+
("\n                1 = "+g.toString(a.config.displayOption)+" \u00d7 \\color{black}{"+a.numberValue+"}  \n                - "+k.toString(a.config.displayOption)+" \u00d7 \\color{blue}{"+c.numberValue+"}"),url:"1="+d[0]+"&2="+h+"&op=0"});return[g,k,m]};b.allPolynomial=[];b.mathUpdateInProgress=!1;b.div=b.divideAndModulus.bind({},!0);b.mod=b.divideAndModulus.bind({},!1);return b}();
